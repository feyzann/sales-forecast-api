📊Otomatik Satış ve Stok
Tahminleme API'si
Kapsamlı Developer Rehberi
🎯 Bu Rehber Kimler İçin?
Bu doküman, API'yi projelerine entegre edecek geliştiriciler için A'dan Z'ye bir
teknik rehber olarak hazırlanmıştır. API, istek gönder ve anında cevap al
(senkron) prensibiyle çalışır ve en karmaşık tahmin senaryolarını bile basit
parametrelerle yönetmenizi sağlar.
📖 Sistem Nedir ve Ne Yapar?
Bu API, geçmiş satış verilerinizi kullanarak geleceğe yönelik istatistiksel tahminler
üreten bir makine öğrenmesi servisidir. "Önümüzdeki ay için haftalık satış kırılımı ne
olur?" gibi iş sorularına saniyeler içinde yanıt verir.
Geçmiş Satış Verisi → API İsteği → ML Analizi
→ Detaylı Tahmin Sonuçları
Temel Özellikler:
Esnek Veri Okuma: Farklı kolon adlarını (`tarih`, `date`, `satis`, `quantity`)
otomatik tanır.
8/17/25, 12:40 AM Otomatik Satış ve Stok Tahminleme API'si - Kapsamlı Teknik Rehber
ﬁle:///Users/ayberkcakar/Downloads/sales-prediction-api-doc.html 1/8

Çoklu Zaman Serisi: Günlük, haftalık ve aylık periyotlarda tahmin alabilme.
Anında Sonuç: Tüm işlemlerin tek bir istek-cevap döngüsünde tamamlanması.
Akıllı Veri Hazırlama: Aykırı değerleri (outlier) ve eksik verileri sizin yerinize
yönetir.
Harici Faktörler: Promosyon, tatil gibi satışları etkileyen harici faktörleri modele
dahil edebilme.
🛠 Teknoloji Yığını ve Mimarisi
Model & Mantık Katmanı (Python): Tüm veri analizi, özellik mühendisliği ve
makine öğrenmesi modelleri (Scikit-learn, Pandas, Prophet, XGBoost) Python
ekosisteminde geliştirilmiştir.
API Sunucusu (Flask): Gelen HTTP istekleri, hafif ve yüksek performanslı bir
web framework olan Flask ile karşılanır, doğrulanır ve işlenir.
Konteynerizasyon (Docker): Uygulamanın tamamı, tüm bağımlılıkları ile
birlikte bir Docker konteyneri olarak paketlenmiştir. Bu, farklı ortamlarda
(geliştirme, test, production) tutarlı bir şekilde çalışmasını garanti eder.
CI/CD (GitHub Actions): Koddaki her değişiklik, GitHub Actions üzerinde
tanımlı bir pipeline aracılığıyla otomatik olarak test edilir, derlenir ve başarılı
olması durumunda production ortamına güvenli bir şekilde dağıtılır.
🔧 API Kullanımı
POST /api/v1/predict
Request Parametreleri
Parametre Tip Zorunlu Açıklama Örnek
data Array Evet Geçmiş satış
verilerini içeren
[{"tarih":
"...",
8/17/25, 12:40 AM Otomatik Satış ve Stok Tahminleme API'si - Kapsamlı Teknik Rehber
ﬁle:///Users/ayberkcakar/Downloads/sales-prediction-api-doc.html 2/8

Parametre Tip Zorunlu Açıklama Örnek
JSON objeleri
dizisi.
"satis":
...}]
prediction_period Integer Evet
Kaç periyot ileriye
dönük tahmin
yapılacağı.
30
prediction_frequencyString Evet
Tahmin
periyodunun
frekansı ("daily",
"weekly",
"monthly").
"daily"
aggregation_levelString Hayır
Verilen günlük
verinin tahmin
öncesi hangi
seviyede
toplanacağı
("daily", "weekly",
"monthly").
Varsayılan: "daily".
"weekly"
feature_columns Array
(String) Hayır
Modelin analiz
etmesi için
belirtilen ek kolon
adları.
["promosyon",
"tatil_gunu"]
confidence_intervalBoolean Hayır
Tahminler için
güven aralığının
(alt/üst limit)
döndürülüp
döndürülmeyeceği.
Varsayılan: false.
true
Tahmin Senaryoları
8/17/25, 12:40 AM Otomatik Satış ve Stok Tahminleme API'si - Kapsamlı Teknik Rehber
ﬁle:///Users/ayberkcakar/Downloads/sales-prediction-api-doc.html 3/8

📅 Senaryo 1: Gelecek 15 Gün İçin Günlük Tahmin
İş Sorusu: "Önümüzdeki iki hafta boyunca her bir gün için satış beklentim
nedir?"
{
  "prediction_period": 15,
  "prediction_frequency": "daily"
}
// Sonuç: 15 adet günlük tahmin döner.
📊 Senaryo 2: Gelecek 3 Ay İçin Aylık Toplam Tahmin
İş Sorusu: "Bir sonraki çeyrekte her bir ay için toplam satış hedefim ne olmalı?"
{
  "prediction_period": 3,
  "prediction_frequency": "monthly",
  "aggregation_level": "monthly" // Günlük veriyi aylık toplamlara çevirir
}
// Sonuç: 3 adet aylık toplam tahmini döner.
📈 Senaryo 3: Gelecek Ayın Haftalık Satış Kırılımı
İş Sorusu: "Gelecek ayki toplam satış hedefimin haftalara göre dağılımı nasıl
olacak? Hangi hafta daha yoğun geçecek?"
{
  "prediction_period": 4, // Gelecek 4 hafta
  "prediction_frequency": "weekly",
  "aggregation_level": "weekly" // Günlük veriyi haftalık toplamlara çeviri
8/17/25, 12:40 AM Otomatik Satış ve Stok Tahminleme API'si - Kapsamlı Teknik Rehber
ﬁle:///Users/ayberkcakar/Downloads/sales-prediction-api-doc.html 4/8

}
// Sonuç: Gelecek 4 hafta için 4 adet haftalık tahmin döner.
Örnek Kapsamlı Request
POST /api/v1/predict
Content-Type: application/json
Authorization: Bearer sk_live_your_secret_token
{
  "data": [
    {"tarih": "2025-07-01", "satis_miktari": 120, "kampanya": "yok"},
    {"tarih": "2025-07-02", "satis_miktari": 135, "kampanya": "yok"},
    {"tarih": "2025-07-03", "satis_miktari": 250, "kampanya": "bayram_indirimi"},
    // ... yüzlerce satır daha
  ],
  "prediction_period": 7,
  "prediction_frequency": "daily",
  "feature_columns": ["kampanya"],
  "confidence_interval": true
}
Örnek Kapsamlı Response
{
  "success": true,
  "request_id": "pred-a1b2c3d4-e5f6-7890",
  "processing_time_ms": 3150,
  "data_summary": {
    "input_rows": 365,
    "date_range": "2024-07-16 to 2025-07-15",
    "data_quality_score": 0.95,
    "features_used": ["trend", "weekly_seasonality", "kampanya"]
  },
  "predictions": [
    {
      "date": "2025-07-16",
      "predicted_value": 145.8,
      "confidence_lower": 132.1,
      "confidence_upper": 159.5
    },
    // ... 6 gün daha
  ],
8/17/25, 12:40 AM Otomatik Satış ve Stok Tahminleme API'si - Kapsamlı Teknik Rehber
ﬁle:///Users/ayberkcakar/Downloads/sales-prediction-api-doc.html 5/8

  "model_info": {
    "algorithm": "Ensemble (Prophet+XGBoost)",
    "accuracy_score_mape": 0.08
  }
}
🔍 Veri İşleme Pipeline
1. Otomatik Kolon Tanıma
Sistem, gelen verideki kolonları isimlendirme paternlerine göre otomatik olarak tanır. Bu
sayede her seferinde veri setinizi yeniden adlandırmanıza gerek kalmaz.
Kolon Tipi Tanınan Kelimeler
Tarih tarih, date, gun, day, zaman, time
Satış satis, sales, miktar, quantity, adet, amount, value
Ürün/Grup urun, product, sku, kod, code, item, kategori, category
🧮 Model Seçimi
Akıllı ve Otomatik Model Seçimi
Tek bir model her senaryo için en iyisi değildir. Bu yüzden sistem, sağladığınız
verinin özelliklerine (veri miktarı, mevsimsellik gücü vb.) göre en uygun makine
öğrenmesi modelini veya modellerin bir kombinasyonunu (ensemble) otomatik
olarak seçer. Bu, her seferinde en yüksek doğruluk oranını hedeflememizi sağlar.
8/17/25, 12:40 AM Otomatik Satış ve Stok Tahminleme API'si - Kapsamlı Teknik Rehber
ﬁle:///Users/ayberkcakar/Downloads/sales-prediction-api-doc.html 6/8

⚡ Performans ve Limitler
Limit Tipi Değer Açıklama
Maksimum Veri
Boyutu 100,000 satır Tek bir istekte gönderilebilecek
maksimum satır sayısı.
Maksimum
Tahmin Periyodu
365 gün / 52
hafta / 12 ay İstenen frekansa bağlı olarak değişir.
Request Timeout5 dakika Bir isteğin bu süreden daha uzun sürmesi
durumunda zaman aşımına uğrar.
Rate Limit 100 istek/saat Her bir API anahtarı için saatlik istek
limiti.
🔐 Güvenlik
Authentication (Kimlik Doğrulama)
API'ye yapılan tüm istekler, geçerli bir kimlik bilgisi içermelidir. Aşağıdaki iki yöntemden
birini kullanabilirsiniz:
# Yöntem 1: Bearer Token (Önerilen) # HTTP Header'ına eklenir.
Authorization: Bearer sk_live_your_secret_token # Yöntem 2: API
Key Header # Alternatif olarak bu header kullanılabilir. X-API-
Key: your_api_key
🛠 Hata Yönetimi (Error Handling)
❗ 400 - Bad Request
8/17/25, 12:40 AM Otomatik Satış ve Stok Tahminleme API'si - Kapsamlı Teknik Rehber
ﬁle:///Users/ayberkcakar/Downloads/sales-prediction-api-doc.html 7/8

Sebep: İstek gövdesinde zorunlu bir parametre (örn: `data` veya
`prediction_period`) eksik veya yanlış formatta gönderildi.
Çözüm: API dokümanında belirtilen request formatını ve parametreleri tekrar
kontrol edin.
{"error": "missing_parameter", "message":
"'prediction_frequency' parametresi zorunludur."}
🔑 401 - Unauthorized
Sebep: Gönderilen API anahtarı (token) geçersiz, süresi dolmuş veya hiç
gönderilmemiş.
Çözüm: `Authorization` veya `X-API-Key` header'ının doğru ve geçerli bir
anahtar ile gönderildiğinden emin olun.
📉 422 - Unprocessable Entity
Sebep: Veri formatı doğru olsa da, içerik tahminleme için yetersiz. Örneğin,
güvenilir bir tahmin için çok az sayıda (örn: < 30) veri noktası gönderildi.
Çözüm: Daha uzun bir zaman aralığını kapsayan, daha fazla sayıda geçmiş satış
verisi gönderin.
{"error": "insufficient_data", "message": "Güvenilir
tahmin için en az 30 veri noktası gereklidir."}
8/17/25, 12:40 AM Otomatik Satış ve Stok Tahminleme API'si - Kapsamlı Teknik Rehber
ﬁle:///Users/ayberkcakar/Downloads/sales-prediction-api-doc.html 8/8